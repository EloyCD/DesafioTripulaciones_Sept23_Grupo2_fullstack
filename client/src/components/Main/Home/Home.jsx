import React, { useContext, useState } from "react";
import Carrusel from "./Carrusel/Carrusel";
import { userContext } from "../../../context/authContext";

const Home = () => {
  const { userstate } = useContext(userContext);
  const [nProposals, setNProposals] = useState(0);
  const [nClients, setNClients] = useState(0);
  const [nEarnings, setNEarnings] = useState(20);

  const handleClientsCount = (count) => {
    let currentCount = 0;
    const interval = 20; // Duration between count increments
    const increment = () => {
      setNClients(currentCount);
      if (currentCount < count) {
        currentCount++;
        setTimeout(increment, interval);
      }
    };
    increment();
  };

  return (
    <>
      <h1 id="home-header">
        ¡Bienvenido,{" "}
        {userstate
          ? userstate.asesor.split(" ")[0]
          : "por favor, inicia sesión."}
        !
      </h1>
      <section id="achievements">
        <article id="achievement-1" className="achievement">
          <div>
            <div>
              <div>
                <p>{nProposals}</p>
                <div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="41"
                    height="41"
                    viewBox="0 0 41 41"
                    fill="none"
                  >
                    <path
                      d="M12.2865 5.61299C12.4872 3.73103 14.08 2.26514 16.0152 2.26514H24.3486C26.2838 2.26514 27.8766 3.73103 28.0772 5.61299C29.3492 5.63888 30.4489 5.70466 31.388 5.87715C32.6513 6.10921 33.7264 6.55127 34.6013 7.42616C35.6045 8.42935 36.036 9.69247 36.2377 11.1927C36.432 12.6376 36.4319 14.4748 36.4319 16.7541V26.937C36.4319 29.2163 36.432 31.0535 36.2377 32.4985C36.036 33.9987 35.6045 35.2618 34.6013 36.265C33.5981 37.2682 32.335 37.6997 30.8348 37.9014C29.3899 38.0956 27.5527 38.0956 25.2733 38.0956H15.0904C12.8111 38.0956 10.9739 38.0956 9.52897 37.9014C8.02879 37.6997 6.76566 37.2682 5.76247 36.265C4.75928 35.2618 4.32779 33.9987 4.12609 32.4985C3.93182 31.0535 3.93185 29.2163 3.93189 26.937V16.7541C3.93185 14.4748 3.93182 12.6376 4.12609 11.1927C4.32779 9.69247 4.75928 8.42935 5.76247 7.42616C6.63735 6.55127 7.71248 6.10921 8.97581 5.87715C9.91484 5.70466 11.0146 5.63888 12.2865 5.61299ZM12.2898 8.11369C11.093 8.13926 10.1708 8.19948 9.42746 8.33601C8.48278 8.50954 7.93599 8.78817 7.53024 9.19392C7.06896 9.65519 6.76822 10.3028 6.6038 11.5258C6.43454 12.7847 6.43189 14.4532 6.43189 16.8456V26.8456C6.43189 29.2379 6.43454 30.9065 6.6038 32.1654C6.76822 33.3883 7.06896 34.036 7.53024 34.4972C7.99151 34.9585 8.63913 35.2592 9.86209 35.4237C11.121 35.5929 12.7895 35.5956 15.1819 35.5956H25.1819C27.5742 35.5956 29.2428 35.5929 30.5017 35.4237C31.7246 35.2592 32.3723 34.9585 32.8335 34.4972C33.2948 34.036 33.5956 33.3883 33.76 32.1654C33.9292 30.9065 33.9319 29.2379 33.9319 26.8456V16.8456C33.9319 14.4532 33.9292 12.7847 33.76 11.5258C33.5956 10.3028 33.2948 9.65519 32.8335 9.19392C32.4278 8.78817 31.881 8.50954 30.9363 8.33601C30.193 8.19948 29.2708 8.13926 28.074 8.11369C27.8598 9.98133 26.2736 11.4318 24.3486 11.4318H16.0152C14.0902 11.4318 12.504 9.98133 12.2898 8.11369ZM16.0152 4.76514C15.3249 4.76514 14.7652 5.32478 14.7652 6.01514V7.6818C14.7652 8.37216 15.3249 8.9318 16.0152 8.9318H24.3486C25.0389 8.9318 25.5986 8.37216 25.5986 7.6818V6.01514C25.5986 5.32478 25.0389 4.76514 24.3486 4.76514H16.0152ZM26.0957 17.6622C26.5668 18.1669 26.5395 18.9579 26.0348 19.429L18.8919 26.0956C18.4117 26.5439 17.6664 26.5439 17.1861 26.0956L14.329 23.429C13.8243 22.9579 13.797 22.1669 14.2681 21.6622C14.7391 21.1576 15.5301 21.1303 16.0348 21.6013L18.039 23.4719L24.329 17.6013C24.8337 17.1303 25.6247 17.1576 26.0957 17.6622Z"
                      fill="#FAFAFA"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <p>Propuestas aceptadas</p>
          </div>
        </article>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="2"
          height="91"
          viewBox="0 0 2 91"
          fill="none"
        >
          <path d="M1 1V90" stroke="#ADA4A2" />
        </svg>
        <article id="achievement-2" className="achievement">
          <div>
            <div>
              <div>
                <p>{nClients}</p>
                <div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="34"
                    height="37"
                    viewBox="0 0 34 37"
                    fill="none"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M7.62905 8.1818C7.62905 3.80955 11.1735 0.265137 15.5457 0.265137C19.918 0.265137 23.4624 3.80955 23.4624 8.1818C23.4624 12.5541 19.918 16.0985 15.5457 16.0985C11.1735 16.0985 7.62905 12.5541 7.62905 8.1818ZM15.5457 2.76514C12.5542 2.76514 10.129 5.19026 10.129 8.1818C10.129 11.1733 12.5542 13.5985 15.5457 13.5985C18.5373 13.5985 20.9624 11.1733 20.9624 8.1818C20.9624 5.19026 18.5373 2.76514 15.5457 2.76514Z"
                      fill="#FAFAFA"
                    />
                    <path
                      d="M25.5457 21.3762C26.2361 21.3762 26.7957 21.9359 26.7957 22.6262V23.5985H27.7677C28.458 23.5985 29.0177 24.1581 29.0177 24.8485C29.0177 25.5388 28.458 26.0985 27.7677 26.0985H26.7957V27.0707C26.7957 27.761 26.2361 28.3207 25.5457 28.3207C24.8554 28.3207 24.2957 27.761 24.2957 27.0707V26.0985H23.3232C22.6329 26.0985 22.0732 25.5388 22.0732 24.8485C22.0732 24.1581 22.6329 23.5985 23.3232 23.5985H24.2957V22.6262C24.2957 21.9359 24.8554 21.3762 25.5457 21.3762Z"
                      fill="#FAFAFA"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M20.1701 19.0366C18.7156 18.7519 17.1598 18.5985 15.5457 18.5985C11.6898 18.5985 8.13726 19.4749 5.5048 20.9557C2.91152 22.4144 0.962382 24.6252 0.962382 27.3485L0.962271 27.5184C0.960388 29.4548 0.958025 31.8851 3.08973 33.621C4.13885 34.4754 5.60651 35.0829 7.5894 35.4842C9.57782 35.8867 12.1694 36.0985 15.5457 36.0985C20.3259 36.0985 23.5622 35.6753 25.7451 34.8627C27.7098 34.1312 28.8745 33.0595 29.4963 31.7105C31.8669 30.3428 33.4624 27.782 33.4624 24.8485C33.4624 20.4762 29.918 16.9318 25.5457 16.9318C23.4706 16.9318 21.5819 17.7302 20.1701 19.0366ZM6.73045 23.1346C4.49801 24.3904 3.46238 25.9296 3.46238 27.3485C3.46238 29.5281 3.52957 30.7551 4.66836 31.6825C5.28591 32.1854 6.31825 32.6762 8.08537 33.0339C9.84695 33.3905 12.2553 33.5985 15.5457 33.5985C19.8423 33.5985 22.6125 33.2428 24.3971 32.6824C20.5692 32.1261 17.629 28.8306 17.629 24.8485C17.629 23.5687 17.9327 22.3599 18.4719 21.2901C17.5356 21.1651 16.5558 21.0985 15.5457 21.0985C12.0378 21.0985 8.92371 21.9009 6.73045 23.1346ZM20.129 24.8485C20.129 21.8569 22.5542 19.4318 25.5457 19.4318C28.5373 19.4318 30.9624 21.8569 30.9624 24.8485C30.9624 27.84 28.5373 30.2651 25.5457 30.2651C22.5542 30.2651 20.129 27.84 20.129 24.8485Z"
                      fill="#FAFAFA"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <p>Nuevos clientes</p>
          </div>
        </article>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="2"
          height="91"
          viewBox="0 0 2 91"
          fill="none"
        >
          <path d="M1 1V90" stroke="#ADA4A2" />
        </svg>
        <article id="achievement-3" className="achievement">
          <div>
            <div>
              <div>
                <p>{nEarnings}%</p>
                <div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="41"
                    height="41"
                    viewBox="0 0 41 41"
                    fill="none"
                  >
                    <path
                      d="M27.0222 11.8485C27.0222 11.1582 27.5818 10.5985 28.2722 10.5985H37.5758C38.2661 10.5985 38.8258 11.1582 38.8258 11.8485V21.0916C38.8258 21.7819 38.2661 22.3416 37.5758 22.3416C36.8854 22.3416 36.3258 21.7819 36.3258 21.0916V14.8533L26.0994 25.0173C25.3178 25.7943 24.6441 26.4639 24.0323 26.928C23.3765 27.4256 22.6478 27.8019 21.7508 27.8018C20.8538 27.8017 20.1252 27.4252 19.4695 26.9275C18.8578 26.4632 18.1843 25.7935 17.4029 25.0164L16.9458 24.5619C16.0889 23.7098 15.5333 23.161 15.0707 22.81C14.637 22.4808 14.4342 22.4441 14.2999 22.4441C14.1656 22.4442 13.9629 22.481 13.5294 22.8105C13.0671 23.1619 12.5119 23.7111 11.6556 24.5638L5.12446 31.0676C4.63528 31.5547 3.84383 31.5531 3.3567 31.0639C2.86957 30.5747 2.87123 29.7832 3.3604 29.2961L9.94965 22.7344C10.7312 21.9561 11.4048 21.2852 12.0166 20.8202C12.6725 20.3217 13.4014 19.9445 14.299 19.9441C15.1967 19.9438 15.9258 20.3205 16.582 20.8185C17.1942 21.2831 17.8683 21.9534 18.6504 22.7312L19.1075 23.1858C19.9637 24.0371 20.5187 24.5853 20.9809 24.9361C21.4142 25.265 21.6169 25.3018 21.7511 25.3018C21.8853 25.3018 22.0879 25.2651 22.5213 24.9363C22.9836 24.5856 23.5388 24.0375 24.3952 23.1864L34.5449 13.0985H28.2722C27.5818 13.0985 27.0222 12.5389 27.0222 11.8485Z"
                      fill="#FAFAFA"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <p>Aumentos de tus beneficios</p>
          </div>
        </article>
      </section>
      <section id="recent-clients">
        <Carrusel
          userstate={userstate}
          handleClientsNumber={handleClientsCount}
        />
      </section>
    </>
  );
};

export default Home;
