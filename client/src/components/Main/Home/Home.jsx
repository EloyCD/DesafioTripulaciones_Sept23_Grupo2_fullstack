import React, { useContext, useState } from "react";
import Carrusel from "./Carrusel/Carrusel";
import { userContext } from "../../../context/authContext";

const Home = () => {
  const { userstate } = useContext(userContext);
  const [nProposals, setNProposals] = useState(0);
  const [nClients, setNClients] = useState(0);
  const [nEarnings, setNEarnings] = useState(20);

  const handleClientsCount = (count) => {
    let currentCount = 0;
    const interval = 20; // Duration between count increments
    const increment = () => {
      setNClients(currentCount);
      if (currentCount < count) {
        currentCount++;
        setTimeout(increment, interval);
      }
    };
    increment();
  };


  return (
    <>
      <h1 id="home-header">
        ¡Bienvenido,{" "}
        {userstate
          ? userstate.asesor.split(" ")[0]
          : "por favor, inicia sesión."}
        !
      </h1>
      <section id="achievements">
        <article id="achievement-1" className="achievement">
          <div>
            <div>
              <div>
                <p>{nProposals}</p>
                <div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="41"
                    height="41"
                    viewBox="0 0 41 41"
                    fill="none"
                  >
                    <path
                      d="M12.2865 5.61299C12.4872 3.73103 14.08 2.26514 16.0152 2.26514H24.3486C26.2838 2.26514 27.8766 3.73103 28.0772 5.61299C29.3492 5.63888 30.4489 5.70466 31.388 5.87715C32.6513 6.10921 33.7264 6.55127 34.6013 7.42616C35.6045 8.42935 36.036 9.69247 36.2377 11.1927C36.432 12.6376 36.4319 14.4748 36.4319 16.7541V26.937C36.4319 29.2163 36.432 31.0535 36.2377 32.4985C36.036 33.9987 35.6045 35.2618 34.6013 36.265C33.5981 37.2682 32.335 37.6997 30.8348 37.9014C29.3899 38.0956 27.5527 38.0956 25.2733 38.0956H15.0904C12.8111 38.0956 10.9739 38.0956 9.52897 37.9014C8.02879 37.6997 6.76566 37.2682 5.76247 36.265C4.75928 35.2618 4.32779 33.9987 4.12609 32.4985C3.93182 31.0535 3.93185 29.2163 3.93189 26.937V16.7541C3.93185 14.4748 3.93182 12.6376 4.12609 11.1927C4.32779 9.69247 4.75928 8.42935 5.76247 7.42616C6.63735 6.55127 7.71248 6.10921 8.97581 5.87715C9.91484 5.70466 11.0146 5.63888 12.2865 5.61299ZM12.2898 8.11369C11.093 8.13926 10.1708 8.19948 9.42746 8.33601C8.48278 8.50954 7.93599 8.78817 7.53024 9.19392C7.06896 9.65519 6.76822 10.3028 6.6038 11.5258C6.43454 12.7847 6.43189 14.4532 6.43189 16.8456V26.8456C6.43189 29.2379 6.43454 30.9065 6.6038 32.1654C6.76822 33.3883 7.06896 34.036 7.53024 34.4972C7.99151 34.9585 8.63913 35.2592 9.86209 35.4237C11.121 35.5929 12.7895 35.5956 15.1819 35.5956H25.1819C27.5742 35.5956 29.2428 35.5929 30.5017 35.4237C31.7246 35.2592 32.3723 34.9585 32.8335 34.4972C33.2948 34.036 33.5956 33.3883 33.76 32.1654C33.9292 30.9065 33.9319 29.2379 33.9319 26.8456V16.8456C33.9319 14.4532 33.9292 12.7847 33.76 11.5258C33.5956 10.3028 33.2948 9.65519 32.8335 9.19392C32.4278 8.78817 31.881 8.50954 30.9363 8.33601C30.193 8.19948 29.2708 8.13926 28.074 8.11369C27.8598 9.98133 26.2736 11.4318 24.3486 11.4318H16.0152C14.0902 11.4318 12.504 9.98133 12.2898 8.11369ZM16.0152 4.76514C15.3249 4.76514 14.7652 5.32478 14.7652 6.01514V7.6818C14.7652 8.37216 15.3249 8.9318 16.0152 8.9318H24.3486C25.0389 8.9318 25.5986 8.37216 25.5986 7.6818V6.01514C25.5986 5.32478 25.0389 4.76514 24.3486 4.76514H16.0152ZM26.0957 17.6622C26.5668 18.1669 26.5395 18.9579 26.0348 19.429L18.8919 26.0956C18.4117 26.5439 17.6664 26.5439 17.1861 26.0956L14.329 23.429C13.8243 22.9579 13.797 22.1669 14.2681 21.6622C14.7391 21.1576 15.5301 21.1303 16.0348 21.6013L18.039 23.4719L24.329 17.6013C24.8337 17.1303 25.6247 17.1576 26.0957 17.6622Z"
                      fill="#FAFAFA"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <p>Propuestas aceptadas</p>
          </div>
        </article>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="2"
          height="91"
          viewBox="0 0 2 91"
          fill="none"
        >
          <path d="M1 1V90" stroke="#ADA4A2" />
        </svg>
        <article id="achievement-2" className="achievement">
          <div>
            <div>
              <div>
                <p>{nClients}</p>
                <div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="41"
                    height="41"
                    viewBox="0 0 41 41"
                    fill="none"
                  >
                    <path
                      d="M12.2865 5.61299C12.4872 3.73103 14.08 2.26514 16.0152 2.26514H24.3486C26.2838 2.26514 27.8766 3.73103 28.0772 5.61299C29.3492 5.63888 30.4489 5.70466 31.388 5.87715C32.6513 6.10921 33.7264 6.55127 34.6013 7.42616C35.6045 8.42935 36.036 9.69247 36.2377 11.1927C36.432 12.6376 36.4319 14.4748 36.4319 16.7541V26.937C36.4319 29.2163 36.432 31.0535 36.2377 32.4985C36.036 33.9987 35.6045 35.2618 34.6013 36.265C33.5981 37.2682 32.335 37.6997 30.8348 37.9014C29.3899 38.0956 27.5527 38.0956 25.2733 38.0956H15.0904C12.8111 38.0956 10.9739 38.0956 9.52897 37.9014C8.02879 37.6997 6.76566 37.2682 5.76247 36.265C4.75928 35.2618 4.32779 33.9987 4.12609 32.4985C3.93182 31.0535 3.93185 29.2163 3.93189 26.937V16.7541C3.93185 14.4748 3.93182 12.6376 4.12609 11.1927C4.32779 9.69247 4.75928 8.42935 5.76247 7.42616C6.63735 6.55127 7.71248 6.10921 8.97581 5.87715C9.91484 5.70466 11.0146 5.63888 12.2865 5.61299ZM12.2898 8.11369C11.093 8.13926 10.1708 8.19948 9.42746 8.33601C8.48278 8.50954 7.93599 8.78817 7.53024 9.19392C7.06896 9.65519 6.76822 10.3028 6.6038 11.5258C6.43454 12.7847 6.43189 14.4532 6.43189 16.8456V26.8456C6.43189 29.2379 6.43454 30.9065 6.6038 32.1654C6.76822 33.3883 7.06896 34.036 7.53024 34.4972C7.99151 34.9585 8.63913 35.2592 9.86209 35.4237C11.121 35.5929 12.7895 35.5956 15.1819 35.5956H25.1819C27.5742 35.5956 29.2428 35.5929 30.5017 35.4237C31.7246 35.2592 32.3723 34.9585 32.8335 34.4972C33.2948 34.036 33.5956 33.3883 33.76 32.1654C33.9292 30.9065 33.9319 29.2379 33.9319 26.8456V16.8456C33.9319 14.4532 33.9292 12.7847 33.76 11.5258C33.5956 10.3028 33.2948 9.65519 32.8335 9.19392C32.4278 8.78817 31.881 8.50954 30.9363 8.33601C30.193 8.19948 29.2708 8.13926 28.074 8.11369C27.8598 9.98133 26.2736 11.4318 24.3486 11.4318H16.0152C14.0902 11.4318 12.504 9.98133 12.2898 8.11369ZM16.0152 4.76514C15.3249 4.76514 14.7652 5.32478 14.7652 6.01514V7.6818C14.7652 8.37216 15.3249 8.9318 16.0152 8.9318H24.3486C25.0389 8.9318 25.5986 8.37216 25.5986 7.6818V6.01514C25.5986 5.32478 25.0389 4.76514 24.3486 4.76514H16.0152ZM26.0957 17.6622C26.5668 18.1669 26.5395 18.9579 26.0348 19.429L18.8919 26.0956C18.4117 26.5439 17.6664 26.5439 17.1861 26.0956L14.329 23.429C13.8243 22.9579 13.797 22.1669 14.2681 21.6622C14.7391 21.1576 15.5301 21.1303 16.0348 21.6013L18.039 23.4719L24.329 17.6013C24.8337 17.1303 25.6247 17.1576 26.0957 17.6622Z"
                      fill="#FAFAFA"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <p>Nuevos clientes</p>
          </div>
        </article>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="2"
          height="91"
          viewBox="0 0 2 91"
          fill="none"
        >
          <path d="M1 1V90" stroke="#ADA4A2" />
        </svg>
        <article id="achievement-3" className="achievement">
          <div>
            <div>
              <div>
                <p>{nEarnings}%</p>
                <div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="41"
                    height="41"
                    viewBox="0 0 41 41"
                    fill="none"
                  >
                    <path
                      d="M12.2865 5.61299C12.4872 3.73103 14.08 2.26514 16.0152 2.26514H24.3486C26.2838 2.26514 27.8766 3.73103 28.0772 5.61299C29.3492 5.63888 30.4489 5.70466 31.388 5.87715C32.6513 6.10921 33.7264 6.55127 34.6013 7.42616C35.6045 8.42935 36.036 9.69247 36.2377 11.1927C36.432 12.6376 36.4319 14.4748 36.4319 16.7541V26.937C36.4319 29.2163 36.432 31.0535 36.2377 32.4985C36.036 33.9987 35.6045 35.2618 34.6013 36.265C33.5981 37.2682 32.335 37.6997 30.8348 37.9014C29.3899 38.0956 27.5527 38.0956 25.2733 38.0956H15.0904C12.8111 38.0956 10.9739 38.0956 9.52897 37.9014C8.02879 37.6997 6.76566 37.2682 5.76247 36.265C4.75928 35.2618 4.32779 33.9987 4.12609 32.4985C3.93182 31.0535 3.93185 29.2163 3.93189 26.937V16.7541C3.93185 14.4748 3.93182 12.6376 4.12609 11.1927C4.32779 9.69247 4.75928 8.42935 5.76247 7.42616C6.63735 6.55127 7.71248 6.10921 8.97581 5.87715C9.91484 5.70466 11.0146 5.63888 12.2865 5.61299ZM12.2898 8.11369C11.093 8.13926 10.1708 8.19948 9.42746 8.33601C8.48278 8.50954 7.93599 8.78817 7.53024 9.19392C7.06896 9.65519 6.76822 10.3028 6.6038 11.5258C6.43454 12.7847 6.43189 14.4532 6.43189 16.8456V26.8456C6.43189 29.2379 6.43454 30.9065 6.6038 32.1654C6.76822 33.3883 7.06896 34.036 7.53024 34.4972C7.99151 34.9585 8.63913 35.2592 9.86209 35.4237C11.121 35.5929 12.7895 35.5956 15.1819 35.5956H25.1819C27.5742 35.5956 29.2428 35.5929 30.5017 35.4237C31.7246 35.2592 32.3723 34.9585 32.8335 34.4972C33.2948 34.036 33.5956 33.3883 33.76 32.1654C33.9292 30.9065 33.9319 29.2379 33.9319 26.8456V16.8456C33.9319 14.4532 33.9292 12.7847 33.76 11.5258C33.5956 10.3028 33.2948 9.65519 32.8335 9.19392C32.4278 8.78817 31.881 8.50954 30.9363 8.33601C30.193 8.19948 29.2708 8.13926 28.074 8.11369C27.8598 9.98133 26.2736 11.4318 24.3486 11.4318H16.0152C14.0902 11.4318 12.504 9.98133 12.2898 8.11369ZM16.0152 4.76514C15.3249 4.76514 14.7652 5.32478 14.7652 6.01514V7.6818C14.7652 8.37216 15.3249 8.9318 16.0152 8.9318H24.3486C25.0389 8.9318 25.5986 8.37216 25.5986 7.6818V6.01514C25.5986 5.32478 25.0389 4.76514 24.3486 4.76514H16.0152ZM26.0957 17.6622C26.5668 18.1669 26.5395 18.9579 26.0348 19.429L18.8919 26.0956C18.4117 26.5439 17.6664 26.5439 17.1861 26.0956L14.329 23.429C13.8243 22.9579 13.797 22.1669 14.2681 21.6622C14.7391 21.1576 15.5301 21.1303 16.0348 21.6013L18.039 23.4719L24.329 17.6013C24.8337 17.1303 25.6247 17.1576 26.0957 17.6622Z"
                      fill="#FAFAFA"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <p>Aumentos de tus beneficios</p>
          </div>
        </article>
      </section>
      <section id="recent-clients">
        <Carrusel
          userstate={userstate}
          handleClientsNumber={handleClientsCount}
        />
      </section>
    </>
  );
};

export default Home;